<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shared - {{ app_name }}</title>
    <link rel="icon" type="image/x-icon" href="/static/favicon.ico">
    <link rel="stylesheet" href="/static/css/tailwind.css">
    <link rel="stylesheet" href="/static/css/main.css">
    <link id="theme-stylesheet" rel="stylesheet" href="">
    <script>
        // Load theme on page load
        (async function loadTheme() {
            try {
                const response = await fetch('/api/admin/current-theme');
                const theme = await response.json();

                const themeLink = document.getElementById('theme-stylesheet');
                if (themeLink && theme.css_path) {
                    themeLink.href = theme.css_path;
                }
            } catch (error) {
                console.error('Error loading theme:', error);
                // Fallback to default dark theme
                const themeLink = document.getElementById('theme-stylesheet');
                if (themeLink) {
                    themeLink.href = '/static/css/themes/default_dark.css';
                }
            }
        })();
    </script>
</head>
<body class="bg text text-xs">
    <!-- Age Verification Overlay -->
    <div id="age-verification-overlay" class="age-verification-overlay" style="display: none;">
        <div class="surface border-2 border-danger p-8 max-w-md text-center">
            <svg class="mx-auto mb-4" width="64" height="64" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z" fill="var(--red)"/>
            </svg>
            <h2 class="text-xl font-bold mb-4 text-danger">Explicit Content Warning</h2>
            <p class="text-base mb-6 text">
                This media contains explicit content. By clicking "Yes, I am 18+", you confirm that you are over the age of 18 and consent to viewing adult content.
            </p>
            <div class="flex gap-4 justify-center">
                <button id="age-confirm-yes" class="px-6 py-3 bg-success hover:bg-success tag-text font-bold text-sm">
                    Yes, I am 18+
                </button>
                <button id="age-confirm-no" class="px-6 py-3 bg-danger hover:bg-danger tag-text font-bold text-sm">
                    No, I am not 18
                </button>
            </div>
        </div>
    </div>

    <!-- Fullscreen Image Overlay -->
    <div id="fullscreen-overlay">
        <div id="fullscreen-image-wrapper">
            <img id="fullscreen-image" src="" alt="">
        </div>
        <div class="fullscreen-close-hint">Press ESC or click outside the media to close</div>
    </div>

    <div class="container mx-auto px-4 py-4">
        <div class="bg-primary primary-text p-3 mb-4 flex items-center gap-2 text-xs">
            <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"/>
            </svg>
            <span class="font-bold">This content has been shared with you.</span>
        </div>
        
        <div id="shared-content"></div>
    </div>
    
    <script src="/static/js/fullscreen-mediaviewer.js"></script>
    <script src="/static/js/shared.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const shareUuid = '{{ share_uuid }}';
            new SharedViewer(shareUuid);
        });
    </script>
</body>
</html>
